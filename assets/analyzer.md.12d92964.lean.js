import{_ as M,h as r,C as V,o as k,b as $,w as x,k as s,t as p,H as A,c as R,e as F,T as H,N as j,Z as h,p as G,m as J,a as Q,Q as Y}from"./chunks/framework.76f6b476.js";const Z="/assets/logo-upload.7456a425.svg";const f=c=>(G("data-v-bb4d00cb"),c=c(),J(),c),q=f(()=>s("h4",{style:{"text-align":"center"}}," 请点击按钮上传导出的 .txt/.log 文件, 并尽量不要更改导出文件的名称。 ",-1)),K=f(()=>s("img",{class:"icon-upload",src:Z},null,-1)),W={class:"file-uploader-container"},X={class:"file-uploader-label",for:"file-uploader",singleLine:"false"},ee=["disabled"],ae={key:0,class:"analysis-result-main"},se=f(()=>s("hr",null,null,-1)),le=f(()=>s("h4",{class:"analysis-result-title"},"分析结果:",-1)),te={class:"analysis-result-msg"},ne={__name:"Analyzer",setup(c){const u=r(null),i=r(""),g=r(!1),d=r(!1),n=r("未选择文件"),_=r("开始上传"),m=r(""),b=r("导航到解决方案");var o=null,P=null,I=null;const w=window.location.href;w.substring(0,w.indexOf(window.location.pathname));function T(e){i.value="rgba(255,255,255,0.5)"}function E(e){i.value="rgba(255,255,255,0.5)"}function B(e){i.value="var(--vp-custom-block-tip-bg)"}function D(e){const a=e.dataTransfer.files;U(a)}function U(e){if(console.log("文件拖拽："+e),i.value="var(--vp-custom-block-tip-bg)",S(),e.length!=1)n.value="仅能上传一个文件";else{var a=e[0],l=e[0].name,t=l.substring(l.lastIndexOf(".")+1).toLowerCase();return t=="log"||t=="txt"?(_.value="正在分析",d.value=!0,n.value=a.name,C(a,t),!0):(n.value="请上传 .txt/.log 文件!",!1)}}function S(){console.log("重新初始化"),g.value=!1,m.value="分析器歇逼了",b.value="导航到解决方案",o=null,clearInterval(P),clearInterval(I)}function L(){S();var e=u.value,a=e.value,l=a.substring(a.lastIndexOf(".")+1).toLowerCase();if(["log","txt"].includes(l)){console.log("分析文件："+l),_.value="正在分析",d.value=!0;var t=u.value.files[0];return n.value=t.name,C(t,l),!0}else return n.value="请上传 .txt/.log 文件!",e.focus(),!1}function C(e,a){var l=new FileReader(e);if(a!="zip")try{l.readAsText(e),l.onload=t=>{var N=t.target.result;O(N)}}catch{y("ReadLogErr")}}function O(e){console.log("开始分析日志"),e.includes("ping raknet: dial udp: missing address")?v("Success","请检查恁的租赁服状态或者你的网络环境","PhoenixBuilder无法获得租赁服IP"):e.includes("Invalid username or password")?v("Success","检查你输入的账号密码是否正确(一次性密码只能使用一次)","账密输错"):e.includes("Failed to contact with API")?v("Success","无法连接至API验证服务器",SYSTEM_URL+"#无法与API服务器联通","无法连接至验证服务器"):(console.log("日志分析结束，没有找到可能的原因"),v("Unrecord","本工具还未收录您所遇到的错误，请点击下方按钮前往 GitHub 反馈。","https://github.com/RainyHallways/PhoenixBuilder-doc/issues/new/choose","Unrecord"))}function v(e,a,l,t){console.log("展示分析结果：("+e+") "+a),o=l,m.value=a,g.value=!0,d.value=!1,_.value="重新上传",y(e,t)}function y(e,a){switch(console.log("结束分析：("+e+") "+a),e){case"ReadLogErr":n.value="Log 文件读取错误",_.value="重新上传",d=!1,umami.track("Analysis Error",{Status:"Cannot_Read_Log_File",ErrMsg:a});break;case"ErrOpenRstPage":umami.track("Analysis Error",{Status:"Cannot_Redirect_To_Resolution"});break;case"Unrecord":umami.track("Unrecord Crash",{Status:"Unrecord_Crash"}),b.value="提交反馈";case"Success":umami.track("Analysis Finish",{Status:"Analysis_Success",CrashReason:a});break;default:umami.track("Analysis Error",{Status:"Unknown_Error"});break}}function z(){o=="https://github.com/RainyHallways/PhoenixBuilder-doc/issues/new/choose"?window.open(o):o===null||typeof o>"u"?(n.value="无法重定向到解决方案页面",y("ErrOpenRstPage",o)):window.location.href=o}return(e,a)=>{const l=V("ClientOnly");return k(),$(l,null,{default:x(()=>[s("div",{class:"analyzer-main",style:j({"background-color":i.value}),onDragenter:h(T,["prevent"]),onDragover:h(E,["prevent"]),onDrop:h(D,["prevent"]),onDragleave:h(B,["prevent"])},[q,K,s("div",W,[s("h4",X,p(n.value),1),s("button",{disabled:d.value,class:"file-uploader-btn","data-umami-event":"Analysis Button Click",onClick:a[0]||(a[0]=t=>u.value.click())},p(_.value),9,ee),s("input",{ref_key:"fileUploader",ref:u,type:"file",name:"file_uploader",id:"file-uploader",onChange:L,style:{display:"none"}},null,544)]),A(H,{name:"analysis-result"},{default:x(()=>[g.value?(k(),R("div",ae,[se,le,s("p",te,p(m.value),1),s("button",{class:"redirect-btn",onClick:z},p(b.value),1)])):F("",!0)]),_:1})],36)]),_:1})}}},oe=M(ne,[["__scopeId","data-v-bb4d00cb"]]),re=s("h1",{id:"崩溃分析工具",tabindex:"-1"},[Q("崩溃分析工具 "),s("a",{class:"header-anchor",href:"#崩溃分析工具","aria-label":'Permalink to "崩溃分析工具"'},"​")],-1),ie=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"提示"),s("p",null,"崩溃分析工具目前处于测试阶段，可能不稳定。"),s("p",null,"如果你愿意帮助我们，就请试用一下，我们期待你的贡献！")],-1),ce=s("hr",null,null,-1),ue=Y("",4),ve=JSON.parse('{"title":"崩溃分析工具","description":"","frontmatter":{"contributors":[]},"headers":[],"relativePath":"analyzer.md","filePath":"analyzer.md","lastUpdated":1704205793000}'),de={name:"analyzer.md"},pe=Object.assign(de,{setup(c){return(u,i)=>(k(),R("div",null,[re,ie,ce,A(oe),ue]))}});export{ve as __pageData,pe as default};
